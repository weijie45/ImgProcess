@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Photo";
}

<style>
    section {
        display: flex;
        flex-wrap: wrap;
    }

        section::after {
            content: '';
            flex-grow: 999999999;
        }

        section div.img-box {
            margin: 2px;
            background-color: #00BCD4;
            position: relative;
        }

        section i {
            display: block;
        }

        section img {
            position: absolute;
            top: 0;
            width: 100%;
            vertical-align: bottom;
        }

    .info {
        opacity: 0;
        position: absolute;
        box-sizing: border-box;
        background-color: rgba(0,0,0,.3);
        top: 0;
        width: 100%;
        height: 100%;
        text-align: center;
    }

        .info p {
            color: #fff;
        }

        .info:hover {
            -webkit-transition: 500ms;
            opacity: 1;
        }
</style>

@model List<Service.Model.PhotoModel>
@{
    var setting = new Settings.SettingsContextModule().Create("Test");
}

@if (Model == null) {

} else {

<section>
    @foreach (var m in Model) {
        var w = (double)m.Width;
        var h = (double)m.Height;
        double styleWidth = w * 200 / h;
        double padding = h / w * 100;


        <div class='img-box' style="width:@(styleWidth)px;flex-grow:@(styleWidth)">
            <i style="padding-bottom:@(padding)%"></i>
            <img class="lazy" id="@(m.FileName)" data-org-src="../Temp/@($"{m.PhotoSN}_1920.jpg")" data-src="../Temp/@($"{m.PhotoSN}_{setting.GetValue("MaxPixel")}.jpg")" src="" data-title="@m.FileName" alt="">
            <div class="info">
                <button onClick='console.log("download")'><i class='fa fa-cloud-download'></i></button>
                <button onClick='console.log("add favorite")'><i class='fa fa-star-o'></i></button>
                <button onClick='console.log("add photo")'><i class='fa fa-plus-square-o'></i></button>
                <p>Hello World!</p>
            </div>
        </div>
    }
</section>

}

@section Scripts {

    <script>

        $('.lazy').Lazy();

    </script>

}